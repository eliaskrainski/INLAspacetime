<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Define a graph of the union of the supplied matrices
and return the row ordered diagonal plus upper triangle
after padding with zeroes each one so that
all the returned matrices have the same pattern."><title>Prepare a matrix or a list of matrices
for use in some cgeneric code. — upperPadding • INLAspacetime</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare a matrix or a list of matrices
for use in some cgeneric code. — upperPadding"><meta property="og:description" content="Define a graph of the union of the supplied matrices
and return the row ordered diagonal plus upper triangle
after padding with zeroes each one so that
all the returned matrices have the same pattern."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">INLAspacetime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.7.005</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/web/barrierExample.html">Spatial models for domains with barrier</a>
    <a class="dropdown-item" href="../articles/web/piemonte.html">Spatio-temporal examples</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/eliaskrainski/INLAspacetime/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Prepare a matrix or a list of matrices
for use in some cgeneric code.</h1>
      <small class="dont-index">Source: <a href="https://github.com/eliaskrainski/INLAspacetime/blob/HEAD/R/upperPadding.R" class="external-link"><code>R/upperPadding.R</code></a></small>
      <div class="d-none name"><code>upperPadding.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Define a graph of the union of the supplied matrices
and return the row ordered diagonal plus upper triangle
after padding with zeroes each one so that
all the returned matrices have the same pattern.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">upperPadding</span><span class="op">(</span><span class="va">M</span>, relative <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>M</dt>
<dd><p>a matrix or a list of matrices</p></dd>


<dt>relative</dt>
<dd><p>logical. If a list of matrices is supplied,
it indicates if it is to be returned a relative index
and the value for each matrix. See details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If a unique matrix is given, return the
upper triangle considering the 'T' representation
in the Matrix package. If a list of matrices is given,
return a list of two elements: 'graph' and 'xx'.
The 'graph' is the union of the graph from each matrix.
If relative=FALSE, 'xx' is a matrix with number of column equals
the the number of matrices imputed.
If relative=TRUE, it is a list of length equal the number
of matrices imputed. See details.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If relative=FALSE, each columns of 'xx' is the
elements of the corresponding matrix after being padded
to fill the pattern of the union graph.
If relative=TRUE, each element of 'xx' would be a list
with a relative index, 'r', for each non-zero elements of
each matrix is returned relative to the union graph,
the non-lower elements, 'x', of the corresponding matrix,
and a vector, 'o', with the number of non-zero elements
for each line of each resulting matrix.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/sparseMatrix.html" class="external-link">sparseMatrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  j <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="op">-</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, symmetric <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">A</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dsCMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]  .  0  .  . -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]  0  . -2  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]  . -2  . -3 -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]  .  . -3  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] -1  . -4  . -5</span>
<span class="r-in"><span><span class="fu">upperPadding</span><span class="op">(</span><span class="va">A</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dgTMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] . .  .  . -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] . . -2  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] . .  . -3 -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] . .  .  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] . .  .  . -5</span>
<span class="r-in"><span><span class="va">B</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/Diagonal.html" class="external-link">Diagonal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">A</span>, a <span class="op">=</span> <span class="va">B</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dsCMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]  .  0  .  . -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]  0  . -2  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]  . -2  . -3 -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]  .  . -3  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] -1  . -4  . -5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 diagonal matrix of class "ddiMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3] [,4] [,5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    .    .    .    .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    .    2    .    .    .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    .    .    9    .    .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    .    .    .    3    .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]    .    .    .    .   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">upperPadding</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">A</span>, b <span class="op">=</span> <span class="va">B</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $graph</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dgTMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 1 . . . 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] . 1 1 . .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] . . 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] . . . 1 .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] . . . . 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        a  b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]  0  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,] -1  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]  0  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] -2  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]  0  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] -3  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] -4  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]  0  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] -5 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">upperPadding</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">A</span>, b <span class="op">=</span> <span class="va">B</span><span class="op">)</span>, relative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $graph</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dgTMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 1 . . . 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] . 1 1 . .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] . . 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] . . . 1 .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] . . . . 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$a$r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2 4 6 7 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$a$x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -1 -2 -3 -4 -5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$b$r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 3 5 8 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$b$x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  1  2  9  3 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Elias Teixeira Krainski, Finn Lindgren, Haavard Rue.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

