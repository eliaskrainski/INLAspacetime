<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare a matrix or a list of matrices for use in some 'cgeneric' code. — upperPadding • INLAspacetime</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare a matrix or a list of matrices for use in some 'cgeneric' code. — upperPadding"><meta name="description" content="Define a graph of the union of the supplied matrices
and return the row ordered diagonal plus upper triangle
after padding with zeroes each one so that
all the returned matrices have the same pattern."><meta property="og:description" content="Define a graph of the union of the supplied matrices
and return the row ordered diagonal plus upper triangle
after padding with zeroes each one so that
all the returned matrices have the same pattern."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">INLAspacetime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.12.001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><a class="dropdown-item" href="../articles/web/barrierExample.html">Spatial models for domains with barrier</a></li>
    <li><a class="dropdown-item" href="../articles/web/piemonte.html">Spatio-temporal examples</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/eliaskrainski/INLAspacetime/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Prepare a matrix or a list of matrices for use in some 'cgeneric' code.</h1>
      <small class="dont-index">Source: <a href="https://github.com/eliaskrainski/INLAspacetime/blob/master/R/upperPadding.R" class="external-link"><code>R/upperPadding.R</code></a></small>
      <div class="d-none name"><code>upperPadding.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Define a graph of the union of the supplied matrices
and return the row ordered diagonal plus upper triangle
after padding with zeroes each one so that
all the returned matrices have the same pattern.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">upperPadding</span><span class="op">(</span><span class="va">M</span>, relative <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-m">M<a class="anchor" aria-label="anchor" href="#arg-m"></a></dt>
<dd><p>a matrix or a list of matrices</p></dd>


<dt id="arg-relative">relative<a class="anchor" aria-label="anchor" href="#arg-relative"></a></dt>
<dd><p>logical. If a list of matrices is supplied,
it indicates if it is to be returned a relative index
and the value for each matrix. See details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If a unique matrix is given, return the
upper triangle considering the 'T' representation
in the Matrix package. If a list of matrices is given,
return a list of two elements: 'graph' and 'xx'.
The 'graph' is the union of the graph from each matrix.
If relative=FALSE, 'xx' is a matrix with number of column equals
the the number of matrices imputed.
If relative=TRUE, it is a list of length equal the number
of matrices imputed. See details.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If relative=FALSE, each columns of 'xx' is the
elements of the corresponding matrix after being padded
to fill the pattern of the union graph.
If relative=TRUE, each element of 'xx' would be a list
with a relative index, 'r', for each non-zero elements of
each matrix is returned relative to the union graph,
the non-lower elements, 'x', of the corresponding matrix,
and a vector, 'o', with the number of non-zero elements
for each line of each resulting matrix.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/sparseMatrix.html" class="external-link">sparseMatrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  i <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  j <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="op">-</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, symmetric <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">A</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dsCMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]  .  0  .  . -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]  0  . -2  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]  . -2  . -3 -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]  .  . -3  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] -1  . -4  . -5</span>
<span class="r-in"><span><span class="fu">upperPadding</span><span class="op">(</span><span class="va">A</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dgTMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] . .  .  . -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] . . -2  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] . .  . -3 -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] . .  .  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] . .  .  . -5</span>
<span class="r-in"><span><span class="va">B</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/Diagonal.html" class="external-link">Diagonal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/colSums-methods.html" class="external-link">colSums</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">A</span>, a <span class="op">=</span> <span class="va">B</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dsCMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]  .  0  .  . -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]  0  . -2  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]  . -2  . -3 -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]  .  . -3  .  .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] -1  . -4  . -5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 diagonal matrix of class "ddiMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3] [,4] [,5]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    .    .    .    .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    .    2    .    .    .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    .    .    9    .    .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    .    .    .    3    .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]    .    .    .    .   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">upperPadding</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">A</span>, b <span class="op">=</span> <span class="va">B</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $graph</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dgTMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 1 . . . 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] . 1 1 . .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] . . 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] . . . 1 .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] . . . . 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        a  b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1,]  0  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2,] -1  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3,]  0  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4,] -2  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5,]  0  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6,] -3  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7,] -4  0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8,]  0  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9,] -5 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">upperPadding</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="va">A</span>, b <span class="op">=</span> <span class="va">B</span><span class="op">)</span>, relative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $graph</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 x 5 sparse Matrix of class "dgTMatrix"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] 1 . . . 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] . 1 1 . .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] . . 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] . . . 1 .</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] . . . . 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$a$r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2 4 6 7 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$a$x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -1 -2 -3 -4 -5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$b$r</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 3 5 8 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $xx$b$x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  1  2  9  3 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Elias Teixeira Krainski, Finn Lindgren, Haavard Rue.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

